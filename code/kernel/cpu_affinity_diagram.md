# CPU亲和性调度过程示意图设计

## 图表要求
- 展示任务在多核间的调度决策过程
- 突出缓存感知优化机制
- 体现三层决策算法
- 显示时间窗口和缓存热度概念

## 图表内容设计

### 主要元素
1. **多核CPU架构**：显示4个CPU核心，每个核心有L1/L2缓存
2. **任务调度流程**：展示任务从一个核心迁移到另一个核心的决策过程
3. **三层决策机制**：
   - 第一层：可用性检查
   - 第二层：缓存热度分析
   - 第三层：负载均衡
4. **时间轴**：显示10ms缓存热度窗口
5. **缓存状态**：HOT/WARM/COLD三种状态

### 布局设计
```
                任务调度决策流程
    ┌─────────────────────────────────────────┐
    │  新任务唤醒/时间片到期                    │
    └─────────────┬───────────────────────────┘
                  │
    ┌─────────────▼───────────────────────────┐
    │         第一层决策                        │
    │     历史CPU可用性检查                     │
    └─────────────┬───────────────────────────┘
                  │
    ┌─────────────▼───────────────────────────┐
    │         第二层决策                        │
    │       缓存热度分析                        │
    │   ┌─────┐ ┌─────┐ ┌─────┐              │
    │   │ HOT │ │WARM │ │COLD │              │
    │   │<10ms│ │<20ms│ │>20ms│              │
    └─────────────┬───────────────────────────┘
                  │
    ┌─────────────▼───────────────────────────┐
    │         第三层决策                        │
    │       负载均衡优化                        │
    └─────────────┬───────────────────────────┘
                  │
    ┌─────────────▼───────────────────────────┐
    │  CPU核心选择与任务分配                    │
    └─────────────────────────────────────────┘

            CPU架构与缓存层次
    ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐
    │  CPU0  │ │  CPU1  │ │  CPU2  │ │  CPU3  │
    │ ┌────┐ │ │ ┌────┐ │ │ ┌────┐ │ │ ┌────┐ │
    │ │ L1 │ │ │ │ L1 │ │ │ │ L1 │ │ │ │ L1 │ │
    │ └────┘ │ │ └────┘ │ │ └────┘ │ │ └────┘ │
    │ ┌────┐ │ │ ┌────┐ │ │ ┌────┐ │ │ ┌────┐ │
    │ │ L2 │ │ │ │ L2 │ │ │ │ L2 │ │ │ │ L2 │ │
    │ └────┘ │ │ └────┘ │ │ └────┘ │ │ └────┘ │
    └────────┘ └────────┘ └────────┘ └────────┘
    ```
